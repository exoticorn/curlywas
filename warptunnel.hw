import "uw8.ram" memory(2);

export fn tic(time: i32) {
    let i: i32;
    loop pixels {
        let defer x = (i % 320) as f32 - 160.1;
        let defer y = (i / 320 - 128) as f32;
        let defer dist = 10000.0 / (x*x + y*y);
        let defer t = time as f32 / 20 as f32;

        i?120 = (x * dist + t) as i32 ^ (y * dist + t) as i32;

        branch_if (i := i + 1) < 320*256: pixels
    }
}